{"id":"bb-2qy","title":"Make CI reliably update diagrams and analysis on PRs","description":"## Goal\nEnsure diagrams and code analysis are consistently updated as code changes, with auto-fixes applied to PRs before merge.\n\n## Constraints\n- No direct push to main (branch protection enabled)\n- Solutions must work with pull requests\n- Auto-fix PRs when possible\n\n## Success Criteria\n- Diagrams auto-update when code changes\n- Analysis results are committed to PRs\n- No manual steps required for contributors","status":"closed","priority":1,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-31T11:25:06.78861-08:00","created_by":"cartland","updated_at":"2026-01-31T11:46:09.59075-08:00","closed_at":"2026-01-31T11:46:09.59075-08:00","close_reason":"Closed"}
{"id":"bb-2qy.1","title":"Audit current CI workflows and document their purpose","description":"Review all workflows in .github/workflows/:\n1. ci.yml - Main CI\n2. update-diagrams.yml - Auto-update architecture diagrams\n3. update-screenshots.yml - Auto-update Android screenshots\n4. Any others\n\nFor each workflow document:\n- Intended purpose\n- Trigger conditions\n- What it outputs/commits\n- Current issues/gaps","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T11:33:56.524521-08:00","created_by":"cartland","updated_at":"2026-01-31T11:41:19.622943-08:00","closed_at":"2026-01-31T11:41:19.622943-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-2qy.1","depends_on_id":"bb-2qy","type":"parent-child","created_at":"2026-01-31T11:33:56.525164-08:00","created_by":"cartland"}]}
{"id":"bb-2qy.2","title":"Design PR-based auto-update strategy","description":"Design how auto-updates (diagrams, analysis) should work with PRs:\n\n## Options to evaluate:\n1. **Bot commits to PR branch** - GitHub Action pushes updates to the PR branch\n2. **Separate PR from bot** - Action creates a new PR with updates, author merges\n3. **Pre-merge hook** - Block merge until updates are applied\n4. **Post-merge to main** - Update after merge (current approach?)\n\n## Considerations:\n- Branch protection rules\n- GitHub token permissions\n- Merge conflicts with concurrent PRs\n- Developer experience\n\n## Deliverable:\nDocument chosen approach and rationale in .agent/AGENTS.md","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T11:34:41.358019-08:00","created_by":"cartland","updated_at":"2026-01-31T11:41:29.453301-08:00","closed_at":"2026-01-31T11:41:29.453301-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-2qy.2","depends_on_id":"bb-2qy","type":"parent-child","created_at":"2026-01-31T11:34:41.358637-08:00","created_by":"cartland"}]}
{"id":"bb-2qy.3","title":"Implement diagram auto-update for PRs","description":"Make architecture diagrams automatically update when PR changes affect them.\n\n## Requirements:\n- Detect when code changes affect diagrams\n- Generate updated diagrams\n- Commit to PR branch (or create follow-up PR)\n- Work with branch protection (no direct push to main)\n\n## Implementation notes:\n- May need GitHub App or PAT with push permissions\n- Consider using `pull_request_target` trigger carefully\n- Document security considerations","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T11:36:03.160566-08:00","created_by":"cartland","updated_at":"2026-01-31T11:45:48.843704-08:00","closed_at":"2026-01-31T11:45:48.843704-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-2qy.3","depends_on_id":"bb-2qy","type":"parent-child","created_at":"2026-01-31T11:36:03.161211-08:00","created_by":"cartland"}]}
{"id":"bb-2qy.4","title":"Implement code analysis auto-commit for PRs","description":"Make code analysis results (lint fixes, formatting) automatically applied to PRs.\n\n## Requirements:\n- Run analysis on PR\n- Auto-fix what can be fixed (spotless, etc.)\n- Commit fixes back to PR branch\n- Clear feedback if manual fixes needed\n\n## Considerations:\n- Spotless already runs but doesn't auto-fix\n- May need to run spotlessApply and commit\n- Handle merge conflicts if PR updated while CI runs","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T11:38:00.175145-08:00","created_by":"cartland","updated_at":"2026-01-31T11:45:49.263182-08:00","closed_at":"2026-01-31T11:45:49.263182-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-2qy.4","depends_on_id":"bb-2qy","type":"parent-child","created_at":"2026-01-31T11:38:00.175706-08:00","created_by":"cartland"}]}
{"id":"bb-2qy.5","title":"Document CI architecture decisions","description":"Document why CI solutions are implemented the way they are.\n\n## Include:\n- GitHub configuration constraints (branch protection, permissions)\n- Why specific triggers were chosen\n- Trade-offs considered\n- How to modify/extend in future\n\n## Location:\n- Add to .agent/AGENTS.md or create .agent/workflows/ci-guide.md","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T11:38:21.276644-08:00","created_by":"cartland","updated_at":"2026-01-31T11:41:19.970263-08:00","closed_at":"2026-01-31T11:41:19.970263-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-2qy.5","depends_on_id":"bb-2qy","type":"parent-child","created_at":"2026-01-31T11:38:21.277214-08:00","created_by":"cartland"}]}
{"id":"bb-3sz","title":"Add validation checks to CI for obvious error conditions","description":"## Goal\nMake CI fail fast when generated artifacts (diagrams, screenshots, analysis) \nare missing or obviously broken, so unhealthy branches are caught early.\n\n## Motivation\nSilent failures are worse than loud failures. If diagram generation produces\nnothing, the workflow should fail rather than silently succeed with empty output.\n\n## Error Conditions to Detect\n- Empty or missing generated files\n- Suspiciously small files (e.g., 0 bytes)\n- Syntax errors in generated content (e.g., invalid Mermaid)\n- Expected counts not met (e.g., 0 screenshots when code exists)\n\n## Success Criteria\n- CI fails with clear error message when generation produces nothing\n- Developers know immediately what went wrong\n- No silent failures that hide broken tooling","status":"closed","priority":1,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:06:09.165102-08:00","created_by":"cartland","updated_at":"2026-01-31T12:10:18.083256-08:00","closed_at":"2026-01-31T12:10:18.083256-08:00","close_reason":"Closed"}
{"id":"bb-3sz.1","title":"Add Mermaid diagram validation to CI","description":"Validate that Mermaid diagram generation produces valid output.\n\n## Checks to add:\n1. At least one .mmd or .md file with mermaid content is generated\n2. Generated files are non-empty\n3. Mermaid syntax is valid (use mermaid-cli to validate)\n4. Expected diagram types exist (module deps, etc.)\n\n## Implementation:\n- Add validation step after generateMermaidGraph\n- Fail with clear error if validation fails\n- Show which specific check failed","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:06:24.491845-08:00","created_by":"cartland","updated_at":"2026-01-31T12:10:15.780783-08:00","closed_at":"2026-01-31T12:10:15.780783-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-3sz.1","depends_on_id":"bb-3sz","type":"parent-child","created_at":"2026-01-31T12:06:24.492493-08:00","created_by":"cartland"}]}
{"id":"bb-3sz.2","title":"Add screenshot test validation to CI","description":"Validate that screenshot generation produces expected output.\n\n## Checks to add:\n1. Screenshot directory exists and contains images\n2. At least N screenshots generated (configurable minimum)\n3. Image files are valid (not corrupted/empty)\n4. No unexpected decrease in screenshot count\n\n## Implementation:\n- Add validation step after updateDebugScreenshotTest\n- Count generated screenshots vs expected minimum\n- Fail if count is suspiciously low (e.g., 0 or \u003c 50% of expected)","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:06:37.87101-08:00","created_by":"cartland","updated_at":"2026-01-31T12:10:16.182586-08:00","closed_at":"2026-01-31T12:10:16.182586-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-3sz.2","depends_on_id":"bb-3sz","type":"parent-child","created_at":"2026-01-31T12:06:37.871608-08:00","created_by":"cartland"}]}
{"id":"bb-3sz.3","title":"Add code share analysis validation to CI","description":"Validate that code share analysis produces valid output.\n\n## Checks to add:\n1. Analysis output file exists\n2. Output contains expected sections/data\n3. Module count is reasonable (not 0, not suspiciously low)\n4. JSON/output format is valid\n\n## Implementation:\n- Add validation step after analyzeCodeShare\n- Parse output and verify structure\n- Fail with clear error if malformed or empty","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:06:46.888666-08:00","created_by":"cartland","updated_at":"2026-01-31T12:10:16.973016-08:00","closed_at":"2026-01-31T12:10:16.973016-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-3sz.3","depends_on_id":"bb-3sz","type":"parent-child","created_at":"2026-01-31T12:06:46.8893-08:00","created_by":"cartland"}]}
{"id":"bb-3sz.4","title":"Create reusable validation script for CI","description":"Create a validation script that can be used across CI workflows.\n\n## Features:\n- Check file exists and non-empty\n- Check minimum file count in directory\n- Validate JSON/Mermaid syntax\n- Clear error messages with fix suggestions\n\n## Location:\nscripts/validate-generated.sh\n\n## Usage:\n./scripts/validate-generated.sh --diagrams\n./scripts/validate-generated.sh --screenshots\n./scripts/validate-generated.sh --analysis","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:06:56.607251-08:00","created_by":"cartland","updated_at":"2026-01-31T12:10:17.642186-08:00","closed_at":"2026-01-31T12:10:17.642186-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-3sz.4","depends_on_id":"bb-3sz","type":"parent-child","created_at":"2026-01-31T12:06:56.607877-08:00","created_by":"cartland"}]}
{"id":"bb-59n","title":"Fix Code_Share_Analysis.md having 0 table rows","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:12:49.799529-08:00","created_by":"cartland","updated_at":"2026-01-31T12:46:23.323936-08:00","closed_at":"2026-01-31T12:46:23.323936-08:00","close_reason":"Fixed validation script: changed from checking table rows to bullet items since Code_Share_Analysis.md uses bullet list format","labels":["analysis","warning"]}
{"id":"bb-8cb","title":"Maintain user feature set","description":"Track and maintain existing user-facing features","status":"open","priority":2,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:17.427248-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:17.427248-08:00"}
{"id":"bb-8cb.1","title":"Document existing user features","description":"Create feature inventory documenting current app capabilities","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:44.969639-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:44.969639-08:00","dependencies":[{"issue_id":"bb-8cb.1","depends_on_id":"bb-8cb","type":"parent-child","created_at":"2026-01-30T20:45:44.97011-08:00","created_by":"cartland"}]}
{"id":"bb-9wz","title":"Identify architecture and app stability improvements","description":"Track technical debt and stability improvements identified in module audit","status":"open","priority":2,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:18.361329-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:18.361329-08:00"}
{"id":"bb-9wz.1","title":"Remove duplicate :server:app entry in settings.gradle.kts","description":"Lines 39-40 have duplicate inclusion of :server:app module","status":"closed","priority":1,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:36.406363-08:00","created_by":"cartland","updated_at":"2026-01-30T20:49:40.742215-08:00","closed_at":"2026-01-30T20:49:40.742215-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-9wz.1","depends_on_id":"bb-9wz","type":"parent-child","created_at":"2026-01-30T20:45:36.406865-08:00","created_by":"cartland"}]}
{"id":"bb-9wz.2","title":"Move API keys from BuildConfig to runtime configuration","description":"GEMINI_API_KEY is embedded in BuildConfig across multiple modules and readable in APK. Move to secure runtime config.","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:38.092-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:38.092-08:00","dependencies":[{"issue_id":"bb-9wz.2","depends_on_id":"bb-9wz","type":"parent-child","created_at":"2026-01-30T20:45:38.092458-08:00","created_by":"cartland"}]}
{"id":"bb-9wz.3","title":"Document or archive unused iOS app directories","description":"/ios-app-compose-ui and /ios-app-swift-ui exist but are not Gradle modules. Clarify purpose or remove.","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:39.829521-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:39.829521-08:00","dependencies":[{"issue_id":"bb-9wz.3","depends_on_id":"bb-9wz","type":"parent-child","created_at":"2026-01-30T20:45:39.830003-08:00","created_by":"cartland"}]}
{"id":"bb-9wz.4","title":"Add module README documentation","description":"Create README files for each module explaining purpose and responsibilities","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:40.725407-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:40.725407-08:00","dependencies":[{"issue_id":"bb-9wz.4","depends_on_id":"bb-9wz","type":"parent-child","created_at":"2026-01-30T20:45:40.725886-08:00","created_by":"cartland"}]}
{"id":"bb-9wz.5","title":"Complete AI module platform implementations","description":":ai module may have incomplete iOS/Desktop implementations. Verify expect/actual completeness.","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:41.924428-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:41.924428-08:00","dependencies":[{"issue_id":"bb-9wz.5","depends_on_id":"bb-9wz","type":"parent-child","created_at":"2026-01-30T20:45:41.924863-08:00","created_by":"cartland"}]}
{"id":"bb-9wz.6","title":"Create shared test utilities module","description":"Consider creating :test-common module for shared testing utilities across modules","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:42.933137-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:42.933137-08:00","dependencies":[{"issue_id":"bb-9wz.6","depends_on_id":"bb-9wz","type":"parent-child","created_at":"2026-01-30T20:45:42.933625-08:00","created_by":"cartland"}]}
{"id":"bb-dpc","title":"Make tests build locally","description":"Ensure all test suites compile and run on local machines","status":"closed","priority":2,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:15.782731-08:00","created_by":"cartland","updated_at":"2026-01-31T09:09:39.911229-08:00","closed_at":"2026-01-31T09:09:39.911229-08:00","close_reason":"Closed"}
{"id":"bb-dpc.1","title":"Verify unit tests run locally","description":"Run ./gradlew test for all modules","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:27.453856-08:00","created_by":"cartland","updated_at":"2026-01-30T21:15:27.911806-08:00","closed_at":"2026-01-30T21:15:27.911806-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-dpc.1","depends_on_id":"bb-dpc","type":"parent-child","created_at":"2026-01-30T20:45:27.454358-08:00","created_by":"cartland"}]}
{"id":"bb-dpc.2","title":"Verify Android instrumented tests","description":"Run ./gradlew connectedAndroidTest","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:28.243565-08:00","created_by":"cartland","updated_at":"2026-01-31T09:09:35.80895-08:00","closed_at":"2026-01-31T09:09:35.80895-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-dpc.2","depends_on_id":"bb-dpc","type":"parent-child","created_at":"2026-01-30T20:45:28.24408-08:00","created_by":"cartland"}]}
{"id":"bb-dpc.3","title":"Verify screenshot tests","description":"Run screenshot tests in :android-screenshot-tests module","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:29.101643-08:00","created_by":"cartland","updated_at":"2026-01-31T09:08:15.073063-08:00","closed_at":"2026-01-31T09:08:15.073063-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-dpc.3","depends_on_id":"bb-dpc","type":"parent-child","created_at":"2026-01-30T20:45:29.10212-08:00","created_by":"cartland"}]}
{"id":"bb-esm","title":"Investigate 6 small/corrupt screenshot baselines","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-31T12:12:49.088605-08:00","created_by":"cartland","updated_at":"2026-01-31T12:12:49.088605-08:00","labels":["screenshots","warning"]}
{"id":"bb-t28","title":"Make CI build reliably","description":"Ensure CI pipelines are stable and produce consistent results","status":"open","priority":2,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:16.70894-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:16.70894-08:00"}
{"id":"bb-t28.1","title":"Audit CI pipeline configuration","description":"Review CI workflows for reliability issues, caching, and parallelization","status":"open","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:43.990141-08:00","created_by":"cartland","updated_at":"2026-01-30T20:45:43.990141-08:00","dependencies":[{"issue_id":"bb-t28.1","depends_on_id":"bb-t28","type":"parent-child","created_at":"2026-01-30T20:45:43.990609-08:00","created_by":"cartland"}]}
{"id":"bb-zie","title":"Make Android, iOS, and multiplatform app build locally","description":"Ensure all platform builds work on local development machines","status":"closed","priority":2,"issue_type":"epic","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:14.993563-08:00","created_by":"cartland","updated_at":"2026-01-31T08:46:21.515246-08:00","closed_at":"2026-01-31T08:46:21.515246-08:00","close_reason":"Closed"}
{"id":"bb-zie.1","title":"Verify Android app builds locally","description":"Run ./gradlew :compose-app:assembleDebug and fix any issues","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:24.544442-08:00","created_by":"cartland","updated_at":"2026-01-30T21:15:27.770153-08:00","closed_at":"2026-01-30T21:15:27.770153-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-zie.1","depends_on_id":"bb-zie","type":"parent-child","created_at":"2026-01-30T20:45:24.544948-08:00","created_by":"cartland"}]}
{"id":"bb-zie.2","title":"Verify iOS app builds locally","description":"Build iOS framework and verify Xcode project compiles","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:25.101445-08:00","created_by":"cartland","updated_at":"2026-01-31T08:46:09.676845-08:00","closed_at":"2026-01-31T08:46:09.676845-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-zie.2","depends_on_id":"bb-zie","type":"parent-child","created_at":"2026-01-30T20:45:25.101942-08:00","created_by":"cartland"}]}
{"id":"bb-zie.3","title":"Verify Desktop app builds locally","description":"Run ./gradlew :compose-app:packageDistributionForCurrentOS","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:25.773437-08:00","created_by":"cartland","updated_at":"2026-01-30T21:15:27.808133-08:00","closed_at":"2026-01-30T21:15:27.808133-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-zie.3","depends_on_id":"bb-zie","type":"parent-child","created_at":"2026-01-30T20:45:25.777789-08:00","created_by":"cartland"}]}
{"id":"bb-zie.4","title":"Verify server builds locally","description":"Run ./gradlew :server:app:build and test gRPC server","status":"closed","priority":2,"issue_type":"task","owner":"c.cartland@gmail.com","created_at":"2026-01-30T20:45:26.719807-08:00","created_by":"cartland","updated_at":"2026-01-30T21:15:27.858192-08:00","closed_at":"2026-01-30T21:15:27.858192-08:00","close_reason":"Closed","dependencies":[{"issue_id":"bb-zie.4","depends_on_id":"bb-zie","type":"parent-child","created_at":"2026-01-30T20:45:26.720277-08:00","created_by":"cartland"}]}
